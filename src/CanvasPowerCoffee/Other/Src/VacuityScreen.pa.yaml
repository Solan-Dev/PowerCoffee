# ************************************************************************************************
# Warning: YAML source code for Canvas Apps should only be used to review changes made within Power Apps Studio and for minor edits (Preview).
# Use the maker portal to create and edit your Power Apps.
# 
# The schema file for Canvas Apps is available at https://go.microsoft.com/fwlink/?linkid=2304907
# 
# For more information, visit https://go.microsoft.com/fwlink/?linkid=2292623
# ************************************************************************************************
Screens:
  VacuityScreen:
    Properties:
      Fill: =RGBA(246, 244, 240,1)
      OnVisible: =Select(btnOnVis_4)
    Children:
      - cmpNavBar_6:
          Control: CanvasComponent
          ComponentName: cmpNavBar
          Properties:
            CurrentScreen: =App.ActiveScreen.Name
            HamburgerTitle: ="Hello"
            Height: =767
            IconSize: =64
            TemplateHeight: =64
            TemplatePadding: =12
            TopGap: =56
            ViewComponents: |-
              =Table(
                  {
                       conTopPadding: false
                      ,conHamburger:false
                      ,conBottomPadding: true
                      ,conUserImage: true
                  }
              )
            Width: =64
            navItems: |-
              =colNav
              /*
              Table(
                  {
                      ScreenName:["TemplateScreen",""]
                      ,DisplayScreenName:"TemplateScreen"
                      ,Navigation:TemplateScreen
                      ,DefaultPathColour:"'#FFFFFF'"
                      ,LogoHeight:"'28'"
                      ,LogoWidth:"'48'"
                      ,ViewBox:"'1 1 46 26'"
                      ,SelectedPathColour:"<linearGradient id='StrokeGradient' x1='0' y1='10' x2='48' y2='28' gradientUnits='userSpaceOnUse'><stop stop-color='#FF7A00'/><stop offset='1' stop-color='#FF0F00'/></linearGradient>"
                      ,LogoPath:"d='M1.5 1.5A.5.5 0 0 1 2 1h12a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.128.334L10 8.692V13.5a.5.5 0 0 1-.342.474l-3 1A.5.5 0 0 1 6 14.5V8.692L1.628 3.834A.5.5 0 0 1 1.5 3.5v-2z'"
                      ,LogoStrokeWidth:"'1'"
                      ,LogoFill:"'none'"
                      ,TextSize:10
                      ,TextColour:RGBA(255,255,255,1)
                  },
                  {
                      ScreenName:["TemplateControls",""]
                      ,DisplayScreenName:"TemplateControls"
                      ,Navigation:TemplateControls
                      ,DefaultPathColour:"'#FFFFFF'"
                      ,LogoHeight:"'28'"
                      ,LogoWidth:"'48'"
                      ,ViewBox:"'1 1 46 26'"
                      ,SelectedPathColour:"<linearGradient id='StrokeGradient' x1='0' y1='10' x2='20' y2='10' gradientUnits='userSpaceOnUse'><stop stop-color='#FF7A00'/><stop offset='1' stop-color='#FF0F00'/></linearGradient>"
                      ,LogoPath:"d='M1.5 1.5A.5.5 0 0 1 2 1h12a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.128.334L10 8.692V13.5a.5.5 0 0 1-.342.474l-3 1A.5.5 0 0 1 6 14.5V8.692L1.628 3.834A.5.5 0 0 1 1.5 3.5v-2z'"
                      ,LogoStrokeWidth:"'1'"
                      ,LogoFill:"'none'"
                      ,TextSize:10
                      ,TextColour:RGBA(255,255,255,1)
                  }
              )
              /*
              */
      - cmpHeader_3:
          Control: CanvasComponent
          ComponentName: cmpHeader
          Properties:
            Font: =varFont
            Height: |+
              =60
            Title: ="Overview of Warehouse Operational Status"//LookUp(colNav,Navigation.Name = App.ActiveScreen.Name,DisplayScreenName)
            Width: =1366
            inLastAllocationDate: =Today() - 4
            inLastDecisionEngineDate: =Today() - 4
            inNextAllocationDate: =Today() + 8
            inNextDecisionEngineDate: =Today() + 4
      - conScreen_3:
          Control: GroupContainer@1.4.0
          Variant: AutoLayout
          Properties:
            DropShadow: =DropShadow.None
            Height: =708
            LayoutDirection: =LayoutDirection.Vertical
            LayoutGap: |+
              =varGap*0.25
            PaddingBottom: =varGap *0.25
            PaddingLeft: =varGap *0.25
            PaddingRight: =varGap *0.25
            PaddingTop: =varGap *0.25
            Width: =1302
            X: =64
            Y: =60
          Children:
            - conFilters_3:
                Control: GroupContainer@1.4.0
                Variant: AutoLayout
                Properties:
                  DropShadow: =DropShadow.None
                  Fill: =RGBA(255, 255, 255, 0)
                  FillPortions: =0
                  Height: =45
                  LayoutAlignItems: =LayoutAlignItems.Center
                  LayoutDirection: =LayoutDirection.Horizontal
                  LayoutGap: =varGap
                  PaddingBottom: =varGap*0.25
                  PaddingLeft: =varGap*0.5
                  PaddingRight: =varGap*0.25
                  PaddingTop: =varGap*0.25
                  RadiusBottomLeft: =0
                  RadiusBottomRight: =0
                  RadiusTopLeft: =0
                  RadiusTopRight: =0
                Children:
                  - conLeftFilterBlock_3:
                      Control: GroupContainer@1.4.0
                      Variant: AutoLayout
                      Properties:
                        Fill: =RGBA(255, 255, 255, 1)
                        FillPortions: =11
                        LayoutAlignItems: =LayoutAlignItems.Center
                        LayoutDirection: =LayoutDirection.Horizontal
                        LayoutGap: =varGap
                        LayoutMinHeight: =Parent.Height - (Parent.PaddingTop + Parent.PaddingBottom)
                        PaddingBottom: =varGap*0.5
                        PaddingLeft: =varGap*0.5
                        PaddingRight: =varGap*0.5
                        PaddingTop: =varGap*0.5
                      Children:
                        - txtFilterTitle:
                            Control: Text@0.0.51
                            Properties:
                              Align: ='TextCanvas.Align'.End
                              Text: ="Filters:"
                              VerticalAlign: =VerticalAlign.Middle
                              Width: =48
                        - ddSites:
                            Control: DropDown@0.0.45
                            Properties:
                              DefaultSelectedItems: =varUserDefaultSite
                              Height: =Parent.Height - (Parent.PaddingBottom + Parent.PaddingTop)
                              Items: =colSites
                              Width: =150
                            Children:
                              - SiteID3_1:
                                  Control: DropDownDataField@1.5.0
                                  Variant: textualColumn
                                  IsLocked: true
                                  Properties:
                                    FieldDisplayName: ="SiteID"
                                    FieldName: ="SiteID"
                                    FieldType: ="g"
                                    Order: =2
                              - SiteName3_1:
                                  Control: DropDownDataField@1.5.0
                                  Variant: textualColumn
                                  IsLocked: true
                                  Properties:
                                    FieldDisplayName: ="SiteName"
                                    FieldName: ="SiteName"
                                    FieldType: ="s"
                                    Order: =1
                        - ddWarehouses:
                            Control: DropDown@0.0.45
                            Properties:
                              DisplayMode: =If(IsBlank(ddSites.Selected),DisplayMode.Disabled,DisplayMode.Edit)
                              Height: =Parent.Height - (Parent.PaddingBottom + Parent.PaddingTop)
                              Items: =Filter(colWarehouses,SiteID =ddSites.Selected.SiteID)
                              Width: =150
                            Children:
                              - WarehouseID1_1:
                                  Control: DropDownDataField@1.5.0
                                  Variant: textualColumn
                                  IsLocked: true
                                  Properties:
                                    FieldDisplayName: ="WarehouseID"
                                    FieldName: ="WarehouseID"
                                    FieldType: ="g"
                                    Order: =2
                              - WarehouseName3_1:
                                  Control: DropDownDataField@1.5.0
                                  Variant: textualColumn
                                  IsLocked: true
                                  Properties:
                                    FieldDisplayName: ="WarehouseName"
                                    FieldName: ="WarehouseName"
                                    FieldType: ="s"
                                    Order: =1
                              - SiteID4_1:
                                  Control: DropDownDataField@1.5.0
                                  Variant: textualColumn
                                  IsLocked: true
                                  Properties:
                                    FieldDisplayName: ="SiteID"
                                    FieldName: ="SiteID"
                                    FieldType: ="g"
                                    Order: =3
                        - ddDoors:
                            Control: DropDown@0.0.45
                            Properties:
                              DisplayMode: =If(IsBlank(ddWarehouses.Selected),DisplayMode.Disabled,DisplayMode.Edit)
                              Height: =Parent.Height - (Parent.PaddingBottom + Parent.PaddingTop)
                              Items: =Filter(colDoors,WarehouseID=ddWarehouses.Selected.WarehouseID)
                              OnChange: |-
                                =Reset(ddRacksLow);
                                Reset(ddRacksHigh);
                                Reset(ddTiersLow);
                                Reset(ddTiersHigh);
                              Width: =150
                            Children:
                              - DoorID1_1:
                                  Control: DropDownDataField@1.5.0
                                  Variant: textualColumn
                                  IsLocked: true
                                  Properties:
                                    FieldDisplayName: ="DoorID"
                                    FieldName: ="DoorID"
                                    FieldType: ="g"
                                    Order: =2
                              - DoorName1_1:
                                  Control: DropDownDataField@1.5.0
                                  Variant: textualColumn
                                  IsLocked: true
                                  Properties:
                                    FieldDisplayName: ="DoorName"
                                    FieldName: ="DoorName"
                                    FieldType: ="s"
                                    Order: =1
                              - WarehouseID2_1:
                                  Control: DropDownDataField@1.5.0
                                  Variant: textualColumn
                                  IsLocked: true
                                  Properties:
                                    FieldDisplayName: ="WarehouseID"
                                    FieldName: ="WarehouseID"
                                    FieldType: ="g"
                                    Order: =3
                        - btnSearchLocations_2:
                            Control: Button@0.0.45
                            Properties:
                              DisplayMode: =If(IsBlank(ddDoors.Selected),DisplayMode.Disabled,DisplayMode.Edit)
                              FontSize: =11
                              Height: =Parent.Height - (Parent.PaddingBottom + Parent.PaddingTop)
                              Icon: ="AppsListDetail"
                              OnSelect: =UpdateContext({locvisRackTierFilter:true})
                              Text: ="R&T Filter"
                        - btnSearchLocations_1:
                            Control: Button@0.0.45
                            Properties:
                              Appearance: ='ButtonCanvas.Appearance'.Secondary
                              Height: =Parent.Height - (Parent.PaddingBottom + Parent.PaddingTop)
                              Icon: ="ArrowReset"
                              Layout: ='ButtonCanvas.Layout'.IconOnly
                              OnSelect: |-
                                =Reset(ddSites);
                                Reset(ddWarehouses);
                                Reset(ddDoors);
                                Reset(ddRacksLow);
                                Reset(ddRacksHigh);
                                Reset(ddTiersLow);
                                Reset(ddTiersHigh);
                                Clear(colSelectedLocations);
                              Text: =
                              Width: =36
                        - btnSearchLocations_8:
                            Control: Button@0.0.45
                            Properties:
                              Height: =Parent.Height - (Parent.PaddingBottom + Parent.PaddingTop)
                              Icon: ="Search"
                              OnSelect: |+
                                =// 1. Add closure columns as blank to colSelectedLocations
                                ClearCollect(
                                    colSelectedLocations,
                                    AddColumns(
                                        Filter(
                                            colLocations,
                                            (IsBlank(ddSites.Selected) || SiteID = ddSites.Selected.SiteID),
                                            (IsBlank(ddWarehouses.Selected) || WarehouseID = ddWarehouses.Selected.WarehouseID),
                                            (IsBlank(ddDoors.Selected) || DoorID = ddDoors.Selected.DoorID),
                                // RackCode is not blank, and is between two values
                                            (IsBlank(ddRacksLow.Selected) || IsBlank(ddRacksHigh.Selected) ||  
                                                (RackCode >= Value(ddRacksLow.Selected.Value) && RackCode <= Value(ddRacksHigh.Selected.Value))),
                                // TierCode is not blank and is between two values
                                            (IsBlank(ddTiersLow.Selected) || IsBlank(ddTiersHigh.Selected) || 
                                                (TierCode >= Value(ddTiersLow.Selected.Value) && TierCode <= Value(ddTiersHigh.Selected.Value)))
                                        ),
                                    ClosedDate, DateTimeValue("2000-01-01"),
                                    ExpectedOpenDate, DateTimeValue("2000-01-02"),
                                    ClosedReason, "Init",
                                    ClosedReasonDescription, "Init desc",
                                    ClosedOn, DateTimeValue("2000-01-01")
                                    )
                                );

                                // 2. Patch in closure values for matched locations
                                ForAll(
                                    colClosedLocations,
                                    With(
                                        {
                                            index: ThisRecord
                                        },
                                        Patch(
                                            colSelectedLocations,
                                            LookUp(colSelectedLocations,LocationID = index.LocationID),
                                            {
                                                ClosedDate: index.ClosedDate, // not working
                                                ExpectedOpenDate: index.ExpectedOpenDate, // not working
                                                ClosedReason: index.ClosedReason, // not working
                                                ClosedReasonDescription: index.ClosedReasonDescription // not working
                                            }
                                        )
                                    )
                                );
                              Text: ="Search"
                        - Toggle1:
                            Control: Toggle@1.1.5
                            Properties:
                              Label: ="Open/Closed"
                              Width: =196
                  - conFloatFilter_3:
                      Control: GroupContainer@1.4.0
                      Variant: ManualLayout
                      Properties:
                        Fill: =RGBA(255, 255, 255, 1)
                        LayoutMinHeight: =Parent.Height - Parent.PaddingTop - Parent.PaddingBottom
                        LayoutMinWidth: =96
                        PaddingBottom: =varGap *0.5
                        PaddingLeft: =varGap *0.5
                        PaddingRight: =varGap *0.5
                        PaddingTop: =varGap *0.5
                      Children:
                        - btnSearchLocations_9:
                            Control: Button@0.0.45
                            Properties:
                              Height: =Parent.Height - (Parent.PaddingBottom + Parent.PaddingTop)
                              Icon: ="DocumentAdd"
                              OnSelect: =UpdateContext({locvisPopUp:true,locvisNewClosed:true})
                              Text: ="New"
                              X: =5
                              Y: =5
            - conHeadlineMetrics_3:
                Control: GroupContainer@1.4.0
                Variant: AutoLayout
                Properties:
                  DropShadow: =DropShadow.None
                  Fill: =RGBA(255, 255, 255, 0)
                  FillPortions: =0
                  Height: =100
                  LayoutAlignItems: =LayoutAlignItems.Center
                  LayoutDirection: =LayoutDirection.Horizontal
                  LayoutGap: |+
                    =varGap *0.5
                  PaddingBottom: =varGap*0.25
                  PaddingLeft: =varGap*0.5
                  PaddingRight: =varGap*0.25
                  PaddingTop: =varGap*0.25
                  RadiusBottomLeft: =0
                  RadiusBottomRight: =0
                  RadiusTopLeft: =0
                  RadiusTopRight: =0
                Children:
                  - conMetric_5:
                      Control: GroupContainer@1.4.0
                      Variant: ManualLayout
                      Properties:
                        FillPortions: =4
                        LayoutMinHeight: =Parent.Height - (Parent.PaddingTop + Parent.PaddingBottom)
                        LayoutMinWidth: =210
                      Children:
                        - cmpCardMetric_5:
                            Control: CanvasComponent
                            ComponentName: cmpCardMetric
                            Properties:
                              CardValues: |-
                                =Table(
                                    {
                                         TitleHeight:10
                                        ,TitleVis:true
                                        ,TitleFontSize:11
                                        ,TitleFontWeight:FontWeight.Bold
                                        ,SubTitleHeight:10
                                        ,SubTitleVis:true
                                        ,SubTitleFontSize:8
                                        ,SubTitleFontWeight:FontWeight.Lighter
                                        ,MainHeight:10
                                        ,MainVis:true
                                        ,MainFontSize:28
                                        ,MainFontWeight:FontWeight.Normal
                                        ,PrefixVis:false
                                        ,PrefixFontSize:10
                                        ,PrefixFontWeight:FontWeight.Normal
                                        ,SuffixVis:false
                                        ,SuffixFontSize:10
                                        ,SuffixFontWeight:FontWeight.Normal
                                        ,NoteVis:true
                                        ,NoteFontSize:8
                                        ,NoteFontWeight:FontWeight.Normal

                                    }
                                )
                              Height: =Parent.Height
                              MainColour: =RGBA(0, 0, 0, 1)
                              MainText: =Sum(colSelectedLocations,CaskNumber)
                              NoteText: ="NoteText"
                              SubTitleColour: =RGBA(0, 0, 0, 1)
                              SubTitleText: ="Text"
                              TitleColour: =RGBA(0, 0, 0, 1)
                              TitleText: ="Total Cask Places (Capacity)"//Cask count
                              Width: =Parent.Width
                  - conMetric_11:
                      Control: GroupContainer@1.4.0
                      Variant: ManualLayout
                      Properties:
                        FillPortions: =4
                        LayoutMinHeight: =Parent.Height - (Parent.PaddingTop + Parent.PaddingBottom)
                        LayoutMinWidth: =210
                      Children:
                        - cmpCardMetric_11:
                            Control: CanvasComponent
                            ComponentName: cmpCardMetric
                            Properties:
                              CardValues: |-
                                =Table(
                                    {
                                         TitleHeight:10
                                        ,TitleVis:true
                                        ,TitleFontSize:11
                                        ,TitleFontWeight:FontWeight.Bold
                                        ,SubTitleHeight:10
                                        ,SubTitleVis:true
                                        ,SubTitleFontSize:8
                                        ,SubTitleFontWeight:FontWeight.Lighter
                                        ,MainHeight:10
                                        ,MainVis:true
                                        ,MainFontSize:28
                                        ,MainFontWeight:FontWeight.Normal
                                        ,PrefixVis:false
                                        ,PrefixFontSize:10
                                        ,PrefixFontWeight:FontWeight.Normal
                                        ,SuffixVis:false
                                        ,SuffixFontSize:10
                                        ,SuffixFontWeight:FontWeight.Normal
                                        ,NoteVis:true
                                        ,NoteFontSize:8
                                        ,NoteFontWeight:FontWeight.Normal

                                    }
                                )
                              Height: =Parent.Height
                              MainColour: =RGBA(0, 0, 0, 1)
                              MainText: =Sum(Filter(colSelectedLocations,IsOpen),CaskNumber)
                              NoteText: ="NoteText"
                              SubTitleColour: =RGBA(0, 0, 0, 1)
                              SubTitleText: ="Text"
                              TitleColour: =RGBA(0, 0, 0, 1)
                              TitleText: ="Total Filled Cask Places"
                              Width: =Parent.Width
                  - conMetric_12:
                      Control: GroupContainer@1.4.0
                      Variant: ManualLayout
                      Properties:
                        FillPortions: =4
                        LayoutMinHeight: =Parent.Height - (Parent.PaddingTop + Parent.PaddingBottom)
                        LayoutMinWidth: =210
                      Children:
                        - cmpCardMetric_12:
                            Control: CanvasComponent
                            ComponentName: cmpCardMetric
                            Properties:
                              CardValues: |-
                                =Table(
                                    {
                                         TitleHeight:10
                                        ,TitleVis:true
                                        ,TitleFontSize:11
                                        ,TitleFontWeight:FontWeight.Bold
                                        ,SubTitleHeight:10
                                        ,SubTitleVis:true
                                        ,SubTitleFontSize:8
                                        ,SubTitleFontWeight:FontWeight.Lighter
                                        ,MainHeight:10
                                        ,MainVis:true
                                        ,MainFontSize:28
                                        ,MainFontWeight:FontWeight.Normal
                                        ,PrefixVis:false
                                        ,PrefixFontSize:10
                                        ,PrefixFontWeight:FontWeight.Normal
                                        ,SuffixVis:false
                                        ,SuffixFontSize:10
                                        ,SuffixFontWeight:FontWeight.Normal
                                        ,NoteVis:true
                                        ,NoteFontSize:8
                                        ,NoteFontWeight:FontWeight.Normal

                                    }
                                )
                              Height: =Parent.Height
                              MainColour: =RGBA(0, 0, 0, 1)
                              MainText: =Sum(Filter(colSelectedLocations,!IsOpen),CaskNumber)
                              NoteText: ="NoteText"
                              SubTitleColour: =RGBA(0, 0, 0, 1)
                              SubTitleText: ="Text"
                              TitleColour: =RGBA(0, 0, 0, 1)
                              TitleText: ="Total Empty Cask Places"
                              Width: =Parent.Width
            - conMain_3:
                Control: GroupContainer@1.4.0
                Variant: AutoLayout
                Properties:
                  DropShadow: =DropShadow.None
                  Fill: =RGBA(255, 255, 255, 0)
                  Height: =45
                  LayoutAlignItems: =LayoutAlignItems.Center
                  LayoutDirection: =LayoutDirection.Horizontal
                  LayoutGap: |+
                    =varGap *0.5
                  PaddingBottom: =varGap*0.25
                  PaddingLeft: =varGap*0.5
                  PaddingRight: =varGap*0.25
                  PaddingTop: =varGap*0.25
                  RadiusBottomLeft: =0
                  RadiusBottomRight: =0
                  RadiusTopLeft: =0
                  RadiusTopRight: =0
                Children:
                  - conLeftMain_3:
                      Control: GroupContainer@1.4.0
                      Variant: AutoLayout
                      Properties:
                        Fill: =RGBA(255, 255, 255, 1)
                        FillPortions: =9
                        LayoutDirection: =LayoutDirection.Vertical
                        LayoutGap: =varGap
                        LayoutMinHeight: =Parent.Height - (Parent.PaddingTop + Parent.PaddingBottom)
                        PaddingBottom: =varGap *0.5
                        PaddingLeft: =varGap *0.5
                        PaddingRight: =varGap *0.5
                        PaddingTop: =varGap *0.5
                      Children:
                        - conHeaders:
                            Control: GroupContainer@1.4.0
                            Variant: AutoLayout
                            Properties:
                              FillPortions: =0
                              Height: =64
                              LayoutDirection: =LayoutDirection.Horizontal
                              LayoutOverflowX: =LayoutOverflow.Scroll
                              PaddingLeft: =varGap*1.5
                            Children:
                              - txtHeader_1:
                                  Control: Text@0.0.51
                                  Properties:
                                    Height: =Parent.Height
                                    Text: ="Site"
                                    Weight: ='TextCanvas.Weight'.Semibold
                                    Width: =32
                              - txtHeader_2:
                                  Control: Text@0.0.51
                                  Properties:
                                    Height: =Parent.Height
                                    Text: ="Warehouse"
                                    Weight: ='TextCanvas.Weight'.Semibold
                              - txtHeader_3:
                                  Control: Text@0.0.51
                                  Properties:
                                    Height: =Parent.Height
                                    Text: ="Door"
                                    Weight: ='TextCanvas.Weight'.Semibold
                                    Width: =64
                              - txtHeader_4:
                                  Control: Text@0.0.51
                                  Properties:
                                    Height: =Parent.Height
                                    Text: ="Rack"
                                    Weight: ='TextCanvas.Weight'.Semibold
                                    Width: =64
                              - txtHeader_5:
                                  Control: Text@0.0.51
                                  Properties:
                                    Height: =Parent.Height
                                    Text: ="Tier"
                                    Weight: ='TextCanvas.Weight'.Semibold
                                    Width: =64
                              - txtHeader_11:
                                  Control: Text@0.0.51
                                  Properties:
                                    Height: =Parent.Height
                                    Text: ="Storage Type"
                                    Weight: ='TextCanvas.Weight'.Semibold
                              - txtHeader_6:
                                  Control: Text@0.0.51
                                  Properties:
                                    Height: =Parent.Height
                                    Text: ="Status"
                                    Weight: ='TextCanvas.Weight'.Semibold
                              - txtHeader_15:
                                  Control: Text@0.0.51
                                  Properties:
                                    Height: =Parent.Height
                                    Text: ="Total Cask Places"
                                    Weight: ='TextCanvas.Weight'.Semibold
                              - txtHeader_17:
                                  Control: Text@0.0.51
                                  Properties:
                                    Height: =Parent.Height
                                    Text: ="Total Filled Cask Places"
                                    Weight: ='TextCanvas.Weight'.Semibold
                              - txtHeader_16:
                                  Control: Text@0.0.51
                                  Properties:
                                    Height: =Parent.Height
                                    Text: ="Total Empty Cask Places"
                                    Weight: ='TextCanvas.Weight'.Semibold
                              - txtHeader_8:
                                  Control: Text@0.0.51
                                  Properties:
                                    Height: =Parent.Height
                                    Text: ="Closed Description"
                                    Visible: =Toggle1.Checked
                                    Weight: ='TextCanvas.Weight'.Semibold
                              - txtHeader_13:
                                  Control: Text@0.0.51
                                  Properties:
                                    Height: =Parent.Height
                                    Text: ="Closed date"
                                    Visible: =Toggle1.Checked
                                    Weight: ='TextCanvas.Weight'.Semibold
                              - txtHeader_9:
                                  Control: Text@0.0.51
                                  Properties:
                                    Height: =Parent.Height
                                    Text: ="Expected Open Date"
                                    Visible: =Toggle1.Checked
                                    Weight: ='TextCanvas.Weight'.Semibold
                                    Width: =64
                              - txtHeader_14:
                                  Control: Text@0.0.51
                                  Properties:
                                    Height: =Parent.Height
                                    Text: ="Days Closed"
                                    Visible: =Toggle1.Checked
                                    Weight: ='TextCanvas.Weight'.Semibold
                              - txtHeader_7:
                                  Control: Text@0.0.51
                                  Properties:
                                    Height: =Parent.Height
                                    Text: ="Closed Reason"
                                    Visible: =Toggle1.Checked
                                    Weight: ='TextCanvas.Weight'.Semibold
                              - txtHeader_10:
                                  Control: Text@0.0.51
                                  Properties:
                                    Height: =Parent.Height
                                    Text: ="Closed By"
                                    Visible: =Toggle1.Checked
                                    Weight: ='TextCanvas.Weight'.Semibold
                        - galRackAndTier:
                            Control: Gallery@2.15.0
                            Variant: VariableHeight
                            Properties:
                              Items: =SortByColumns(Filter(colSelectedLocations,IsOpen = Toggle1.Checked),"SiteID",SortOrder.Ascending,"WarehouseID",SortOrder.Ascending,"DoorID",SortOrder.Ascending,"RackCode",SortOrder.Ascending)
                              TemplateSize: =32
                              Transition: =Transition.Pop
                            Children:
                              - conRackAndTierValues:
                                  Control: GroupContainer@1.4.0
                                  Variant: AutoLayout
                                  Properties:
                                    Height: =Parent.TemplateHeight
                                    LayoutDirection: =LayoutDirection.Horizontal
                                    LayoutGap: |+
                                      =2
                                    PaddingLeft: =varGap
                                    Width: =Parent.TemplateWidth - Parent.TemplatePadding - varGap
                                  Children:
                                    - txtSiteID:
                                        Control: Text@0.0.51
                                        Properties:
                                          Height: =Parent.Height
                                          Text: =LookUp(colSites,SiteID=ThisItem.SiteID,SiteName)
                                          VerticalAlign: =VerticalAlign.Middle
                                          Width: =48
                                    - txtWarehouseID:
                                        Control: Text@0.0.51
                                        Properties:
                                          Height: =Parent.Height
                                          Text: =LookUp(colWarehouses,WarehouseID = ThisItem.WarehouseID,WarehouseName)
                                          VerticalAlign: =VerticalAlign.Middle
                                    - txtDoor:
                                        Control: Text@0.0.51
                                        Properties:
                                          Height: =Parent.Height
                                          Text: =LookUp(colDoors,DoorID = ThisItem.DoorID,DoorName)
                                          VerticalAlign: =VerticalAlign.Middle
                                          Width: =64
                                    - txtRack:
                                        Control: Text@0.0.51
                                        Properties:
                                          Height: =Parent.Height
                                          Text: =$"Rack {ThisItem.RackCode}"
                                          VerticalAlign: =VerticalAlign.Middle
                                          Width: =64
                                    - txtTier:
                                        Control: Text@0.0.51
                                        Properties:
                                          Height: =Parent.Height
                                          Text: =$"Tier {ThisItem.TierCode}"
                                          VerticalAlign: =VerticalAlign.Middle
                                          Width: =64
                                    - txtTier_7:
                                        Control: Text@0.0.51
                                        Properties:
                                          Height: =Parent.Height
                                          Text: =ThisItem.StorageType
                                          VerticalAlign: =VerticalAlign.Middle
                                    - txtTier_1:
                                        Control: Text@0.0.51
                                        Properties:
                                          Height: =Parent.Height
                                          Text: =$"{If(ThisItem.IsOpen,"Closed","Open")}"
                                          VerticalAlign: =VerticalAlign.Middle
                                          Width: =64
                                    - txtTier_10:
                                        Control: Text@0.0.51
                                        Properties:
                                          Height: =Parent.Height
                                          Text: =$"{Text(ThisItem.ClosedDate,"dd/mm/yy")}"
                                          VerticalAlign: =VerticalAlign.Middle
                                          Visible: =Toggle1.Checked
                                    - txtTier_11:
                                        Control: Text@0.0.51
                                        Properties:
                                          Height: =Parent.Height
                                          Text: =$"{Text(ThisItem.ClosedDate,"dd/mm/yy")}"
                                          VerticalAlign: =VerticalAlign.Middle
                                          Visible: =Toggle1.Checked
                                    - txtTier_12:
                                        Control: Text@0.0.51
                                        Properties:
                                          Height: =Parent.Height
                                          Text: =$"{Text(ThisItem.ClosedDate,"dd/mm/yy")}"
                                          VerticalAlign: =VerticalAlign.Middle
                                          Visible: =Toggle1.Checked
                                    - txtTier_2:
                                        Control: Text@0.0.51
                                        Properties:
                                          Height: =Parent.Height
                                          Text: =$"{Text(ThisItem.ClosedDate,"dd/mm/yy")}"
                                          VerticalAlign: =VerticalAlign.Middle
                                          Visible: =Toggle1.Checked
                                    - txtTier_4:
                                        Control: Text@0.0.51
                                        Properties:
                                          Height: =Parent.Height
                                          Text: =$"{Text(ThisItem.ExpectedOpenDate,"dd/mm/yy")}"
                                          VerticalAlign: =VerticalAlign.Middle
                                          Visible: =Toggle1.Checked
                                          Width: =64
                                    - txtTier_9:
                                        Control: Text@0.0.51
                                        Properties:
                                          Align: ='TextCanvas.Align'.Center
                                          Fill: =If(Value(Self.Text) > 5, ColorValue(varTheme.Signal.Pink.Hex),ColorValue(varTheme.Signal.LightGreen.Hex))
                                          Height: =Parent.Height
                                          Text: =ThisItem.ExpectedOpenDate - ThisItem.ClosedDate
                                          VerticalAlign: =VerticalAlign.Middle
                                          Visible: =Toggle1.Checked
                                    - txtTier_5:
                                        Control: Text@0.0.51
                                        Properties:
                                          Height: =Parent.Height
                                          Text: =$"{ThisItem.ClosedReason}"
                                          VerticalAlign: =VerticalAlign.Middle
                                          Visible: =Toggle1.Checked
                                    - txtTier_3:
                                        Control: Text@0.0.51
                                        Properties:
                                          Height: =Parent.Height
                                          Text: =$"Closed DEsc{ThisItem.ClosedReasonDescription}"
                                          VerticalAlign: =VerticalAlign.Middle
                                          Visible: =Toggle1.Checked
                                    - txtTier_6:
                                        Control: Text@0.0.51
                                        Properties:
                                          Height: =Parent.Height
                                          Text: =User().FullName
                                          VerticalAlign: =VerticalAlign.Middle
                                          Visible: =Toggle1.Checked
                                    - txtTier_8:
                                        Control: Text@0.0.51
                                        Properties:
                                          Height: =Parent.Height
                                          Text: =ThisItem.CaskNumber
                                          VerticalAlign: =VerticalAlign.Middle
            - conSummary_1:
                Control: GroupContainer@1.4.0
                Variant: AutoLayout
                Properties:
                  DropShadow: =DropShadow.None
                  Fill: =RGBA(255, 255, 255, 0)
                  FillPortions: =0
                  Height: =45
                  LayoutAlignItems: =LayoutAlignItems.Center
                  LayoutDirection: =LayoutDirection.Horizontal
                  LayoutGap: =varGap
                  PaddingBottom: =varGap*0.25
                  PaddingLeft: =varGap*0.5
                  PaddingRight: =varGap*0.25
                  PaddingTop: =varGap*0.25
                  RadiusBottomLeft: =0
                  RadiusBottomRight: =0
                  RadiusTopLeft: =0
                  RadiusTopRight: =0
                Children:
                  - conLeftFilterBlock_6:
                      Control: GroupContainer@1.4.0
                      Variant: AutoLayout
                      Properties:
                        Fill: =RGBA(255, 255, 255, 1)
                        FillPortions: =11
                        LayoutAlignItems: =LayoutAlignItems.Center
                        LayoutDirection: =LayoutDirection.Horizontal
                        LayoutGap: =varGap
                        LayoutMinHeight: =Parent.Height - (Parent.PaddingTop + Parent.PaddingBottom)
                        PaddingBottom: =varGap*0.5
                        PaddingLeft: =varGap*0.5
                        PaddingRight: =varGap*0.5
                        PaddingTop: =varGap*0.5
                      Children:
                        - txtFilterTitle_4:
                            Control: Text@0.0.51
                            Properties:
                              Align: ='TextCanvas.Align'.End
                              Text: =$"Total Count:"
                              VerticalAlign: =VerticalAlign.Middle
                        - txtFilterTitle_5:
                            Control: Text@0.0.51
                            Properties:
                              Align: ='TextCanvas.Align'.Start
                              Text: |-
                                =$"Rows: {galRackAndTier.AllItemsCount}"
                              VerticalAlign: =VerticalAlign.Middle
                        - txtFilterTitle_6:
                            Control: Text@0.0.51
                            Properties:
                              Align: ='TextCanvas.Align'.Start
                              Text: |-
                                =$"Casks: {Sum(Filter(colSelectedLocations,IsOpen = Toggle1.Checked),CaskNumber)}"
                              VerticalAlign: =VerticalAlign.Middle
      - conDeveloper_4:
          Control: GroupContainer@1.4.0
          Variant: ManualLayout
          Properties:
            Height: =34
            Visible: =varDevMode
            Width: =64
            Y: =734
          Children:
            - btnOnVis_4:
                Control: Button@0.0.45
                Properties:
                  Height: =34
                  OnSelect: =UpdateContext({locvisMainRight:true});
                  Text: ="onVis"
                  Width: =64
      - conPopUp_3:
          Control: GroupContainer@1.4.0
          Variant: ManualLayout
          Properties:
            Height: =768
            Visible: =locvisPopUp
            Width: =1366
          Children:
            - Rectangle1_2:
                Control: Rectangle@2.3.0
                Properties:
                  Fill: =RGBA(varTheme.Main.PopUpBackground.R,varTheme.Main.PopUpBackground.G,varTheme.Main.PopUpBackground.B,varTheme.Main.PopUpBackground.A)
                  Height: =768
                  OnSelect: =UpdateContext({locvisNewClosed:false,locvisPopUp:false})
                  Width: =1366
            - conNewClosed:
                Control: GroupContainer@1.4.0
                Variant: ManualLayout
                Properties:
                  Fill: =RGBA(255, 255, 255, 1)
                  Height: =768
                  Visible: =locvisNewClosed
                  X: =866
                Children:
                  - TextCanvas1_6:
                      Control: Text@0.0.51
                      Properties:
                        Text: ="Record Closure"
                        VerticalAlign: =VerticalAlign.Middle
                        Weight: ='TextCanvas.Weight'.Semibold
                        X: =30
                        Y: =20
                  - btnDev_7:
                      Control: Button@0.0.45
                      Properties:
                        Appearance: ='ButtonCanvas.Appearance'.Secondary
                        Icon: ="DismissCircle"
                        OnSelect: =UpdateContext({locvisPopUp:false,locvisNewClosed:false})
                        Text: ="Close"
                        X: =370
                        Y: =20
                  - ddSites_2:
                      Control: DropDown@0.0.45
                      Properties:
                        DefaultSelectedItems: =ddSites.Selected
                        Items: =colSites
                        Width: =256
                        X: =156
                        Y: =90
                      Children:
                        - SiteID3_3:
                            Control: DropDownDataField@1.5.0
                            Variant: textualColumn
                            IsLocked: true
                            Properties:
                              FieldDisplayName: ="SiteID"
                              FieldName: ="SiteID"
                              FieldType: ="g"
                              Order: =2
                        - SiteName3_3:
                            Control: DropDownDataField@1.5.0
                            Variant: textualColumn
                            IsLocked: true
                            Properties:
                              FieldDisplayName: ="SiteName"
                              FieldName: ="SiteName"
                              FieldType: ="s"
                              Order: =1
                  - ddWarehouses_2:
                      Control: DropDown@0.0.45
                      Properties:
                        DefaultSelectedItems: =ddWarehouses.Selected
                        DisplayMode: =If(IsBlank(ddSites_2.Selected),DisplayMode.Disabled,DisplayMode.Edit)
                        Items: =Filter(colWarehouses,SiteID =ddSites_2.Selected.SiteID)
                        Width: =256
                        X: =156
                        Y: =125
                      Children:
                        - WarehouseID1_3:
                            Control: DropDownDataField@1.5.0
                            Variant: textualColumn
                            IsLocked: true
                            Properties:
                              FieldDisplayName: ="WarehouseID"
                              FieldName: ="WarehouseID"
                              FieldType: ="g"
                              Order: =2
                        - WarehouseName3_3:
                            Control: DropDownDataField@1.5.0
                            Variant: textualColumn
                            IsLocked: true
                            Properties:
                              FieldDisplayName: ="WarehouseName"
                              FieldName: ="WarehouseName"
                              FieldType: ="s"
                              Order: =1
                        - SiteID4_3:
                            Control: DropDownDataField@1.5.0
                            Variant: textualColumn
                            IsLocked: true
                            Properties:
                              FieldDisplayName: ="SiteID"
                              FieldName: ="SiteID"
                              FieldType: ="g"
                              Order: =3
                  - ddDoors_2:
                      Control: DropDown@0.0.45
                      Properties:
                        DefaultSelectedItems: =ddDoors.Selected
                        DisplayMode: =If(IsBlank(ddWarehouses_2.Selected),DisplayMode.Disabled,DisplayMode.Edit)
                        Items: =Filter(colDoors,WarehouseID=ddWarehouses_2.Selected.WarehouseID)
                        Width: =256
                        X: =156
                        Y: =161
                      Children:
                        - DoorID1_3:
                            Control: DropDownDataField@1.5.0
                            Variant: textualColumn
                            IsLocked: true
                            Properties:
                              FieldDisplayName: ="DoorID"
                              FieldName: ="DoorID"
                              FieldType: ="g"
                              Order: =2
                        - DoorName1_3:
                            Control: DropDownDataField@1.5.0
                            Variant: textualColumn
                            IsLocked: true
                            Properties:
                              FieldDisplayName: ="DoorName"
                              FieldName: ="DoorName"
                              FieldType: ="s"
                              Order: =1
                        - WarehouseID2_3:
                            Control: DropDownDataField@1.5.0
                            Variant: textualColumn
                            IsLocked: true
                            Properties:
                              FieldDisplayName: ="WarehouseID"
                              FieldName: ="WarehouseID"
                              FieldType: ="g"
                              Order: =3
                  - RackFilter_2:
                      Control: Text@0.0.51
                      Properties:
                        Align: ='TextCanvas.Align'.End
                        Height: =36
                        PaddingLeft: =varGap
                        PaddingRight: =varGap
                        Text: |-
                          ="Rack Filter:   From:"
                        VerticalAlign: =VerticalAlign.Middle
                        Weight: ='TextCanvas.Weight'.Regular
                        Width: =156
                        Y: =236
                  - TiersFilter_2:
                      Control: Text@0.0.51
                      Properties:
                        Align: ='TextCanvas.Align'.End
                        Height: =36
                        PaddingLeft: =varGap
                        PaddingRight: =varGap
                        Text: |-
                          ="Tier Filter:     From:"
                        VerticalAlign: =VerticalAlign.Middle
                        Weight: ='TextCanvas.Weight'.Regular
                        Width: =156
                        Y: =272
                  - ddRacksLow_2:
                      Control: DropDown@0.0.45
                      Properties:
                        DefaultSelectedItems: =ddRacksLow.Selected
                        DisplayMode: =If(IsBlank(ddDoors.Selected),DisplayMode.Disabled,DisplayMode.Edit)
                        Items: =Distinct(Filter(colLocations,DoorID=ddDoors.Selected.DoorID),RackCode)
                        Width: =136
                        X: =156
                        Y: =243
                  - ddTiersLow_2:
                      Control: DropDown@0.0.45
                      Properties:
                        DefaultSelectedItems: =ddTiersLow.Selected
                        DisplayMode: =If(IsBlank(ddDoors.Selected),DisplayMode.Disabled,DisplayMode.Edit)
                        Items: =Distinct(Filter(colLocations,DoorID=ddDoors.Selected.DoorID),TierCode)
                        Width: =136
                        X: =156
                        Y: =279
                  - TextCanvas1_19:
                      Control: Text@0.0.51
                      Properties:
                        Align: ='TextCanvas.Align'.End
                        Height: =36
                        PaddingLeft: =varGap
                        PaddingRight: =varGap
                        Text: ="To:"
                        VerticalAlign: =VerticalAlign.Middle
                        Weight: ='TextCanvas.Weight'.Regular
                        Width: =56
                        X: =292
                        Y: =236
                  - TextCanvas1_20:
                      Control: Text@0.0.51
                      Properties:
                        Align: ='TextCanvas.Align'.End
                        Height: =36
                        PaddingLeft: =varGap
                        PaddingRight: =varGap
                        Text: ="To:"
                        VerticalAlign: =VerticalAlign.Middle
                        Weight: ='TextCanvas.Weight'.Regular
                        Width: =56
                        X: =292
                        Y: =272
                  - ddRacksHigh_2:
                      Control: DropDown@0.0.45
                      Properties:
                        DefaultSelectedItems: =ddRacksHigh.Selected
                        DisplayMode: =If(IsBlank(ddRacksLow_2.Selected),DisplayMode.Disabled,DisplayMode.Edit)
                        Items: =Distinct(Filter(colLocations,DoorID=ddDoors.Selected.DoorID,RackCode >= ddRacksLow_2.Selected.Value),RackCode)
                        Width: =136
                        X: =348
                        Y: =243
                  - ddTiersHigh_2:
                      Control: DropDown@0.0.45
                      Properties:
                        DefaultSelectedItems: =ddTiersHigh.Selected
                        DisplayMode: =If(IsBlank(ddTiersLow_2.Selected),DisplayMode.Disabled,DisplayMode.Edit)
                        Items: =Distinct(Filter(colLocations,DoorID=ddDoors.Selected.DoorID,TierCode >= ddTiersLow_2.Selected.Value),TierCode)
                        Width: =136
                        X: =348
                        Y: =279
                  - btnCloseRackandTierFilter_4:
                      Control: Button@0.0.45
                      Properties:
                        Appearance: ='ButtonCanvas.Appearance'.Secondary
                        Height: =24
                        Icon: ="ArrowReset"
                        Layout: ='ButtonCanvas.Layout'.IconOnly
                        OnSelect: |-
                          =Reset(ddSites_2);
                          Reset(ddWarehouses_2);
                          Reset(ddDoors_2);
                          Reset(ddRacksLow_2);
                          Reset(ddRacksHigh_2);
                          Reset(ddTiersLow_2);
                          Reset(ddTiersHigh_2);
                        Text: =
                        Width: =36
                        X: =312
                        Y: =24
                  - TiersFilter_3:
                      Control: Text@0.0.51
                      Properties:
                        Align: ='TextCanvas.Align'.End
                        Height: =36
                        PaddingLeft: =varGap
                        PaddingRight: =varGap
                        Text: ="Storage Type:"
                        VerticalAlign: =VerticalAlign.Middle
                        Weight: ='TextCanvas.Weight'.Regular
                        Width: =156
                        Y: =313
                  - TiersFilter_4:
                      Control: Text@0.0.51
                      Properties:
                        Align: ='TextCanvas.Align'.Start
                        BorderRadius: =4
                        Fill: =RGBA(245, 245, 245, 1)
                        PaddingLeft: =varGap
                        PaddingRight: =varGap
                        Text: |-
                          =First(Filter(
                                      colLocations,
                                      (IsBlank(ddSites_2.Selected) || SiteID = ddSites_2.Selected.SiteID),
                                      (IsBlank(ddWarehouses_2.Selected) || WarehouseID = ddWarehouses_2.Selected.WarehouseID),
                                      (IsBlank(ddDoors_2.Selected) || DoorID = ddDoors_2.Selected.DoorID),
                          // RackCode is not blank, and is between two values
                                      (IsBlank(ddRacksLow_2.Selected) || IsBlank(ddRacksHigh_2.Selected) ||  
                                          (RackCode >= Value(ddRacksLow_2.Selected.Value) && RackCode <= Value(ddRacksHigh_2.Selected.Value))),
                          // TierCode is not blank and is between two values
                                      (IsBlank(ddTiersLow_2.Selected) || IsBlank(ddTiersHigh_2.Selected) || 
                                          (TierCode >= Value(ddTiersLow_2.Selected.Value) && TierCode <= Value(ddTiersHigh_2.Selected.Value)))
                                  )
                          ).StorageType
                        VerticalAlign: =VerticalAlign.Middle
                        Weight: ='TextCanvas.Weight'.Regular
                        Width: =156
                        X: =156
                        Y: =317
                  - TiersFilter_5:
                      Control: Text@0.0.51
                      Properties:
                        Align: ='TextCanvas.Align'.End
                        Height: =36
                        PaddingLeft: =varGap
                        PaddingRight: =varGap
                        Text: ="Total Cask Count:"
                        VerticalAlign: =VerticalAlign.Middle
                        Weight: ='TextCanvas.Weight'.Regular
                        Width: =156
                        Y: =349
                  - TiersFilter_6:
                      Control: Text@0.0.51
                      Properties:
                        Align: ='TextCanvas.Align'.Start
                        BorderRadius: =4
                        Fill: =RGBA(245, 245, 245, 1)
                        PaddingLeft: =varGap
                        PaddingRight: =varGap
                        Text: |-
                          =Sum(        Filter(
                                      colLocations,
                                      (IsBlank(ddSites_2.Selected) || SiteID = ddSites_2.Selected.SiteID),
                                      (IsBlank(ddWarehouses_2.Selected) || WarehouseID = ddWarehouses_2.Selected.WarehouseID),
                                      (IsBlank(ddDoors_2.Selected) || DoorID = ddDoors_2.Selected.DoorID),
                          // RackCode is not blank, and is between two values
                                      (IsBlank(ddRacksLow_2.Selected) || IsBlank(ddRacksHigh_2.Selected) ||  
                                          (RackCode >= Value(ddRacksLow_2.Selected.Value) && RackCode <= Value(ddRacksHigh_2.Selected.Value))),
                          // TierCode is not blank and is between two values
                                      (IsBlank(ddTiersLow_2.Selected) || IsBlank(ddTiersHigh_2.Selected) || 
                                          (TierCode >= Value(ddTiersLow_2.Selected.Value) && TierCode <= Value(ddTiersHigh_2.Selected.Value)))
                                  ),CaskNumber)
                        VerticalAlign: =VerticalAlign.Middle
                        Weight: ='TextCanvas.Weight'.Regular
                        Width: =156
                        X: =156
                        Y: =353
                  - TiersFilter_7:
                      Control: Text@0.0.51
                      Properties:
                        Align: ='TextCanvas.Align'.End
                        Height: =36
                        PaddingLeft: =varGap
                        PaddingRight: =varGap
                        Text: ="Change Status:"
                        VerticalAlign: =VerticalAlign.Middle
                        Weight: ='TextCanvas.Weight'.Regular
                        Width: =156
                        Y: =507
                  - ddIsOpen:
                      Control: DropDown@0.0.45
                      Properties:
                        DisplayMode: =If(IsBlank(ddSites_2.Selected),DisplayMode.Disabled,DisplayMode.Edit)
                        Items: =colLocationStatusOptions
                        Width: =150
                        X: =156
                        Y: =511
                      Children:
                        - Label1:
                            Control: DropDownDataField@1.5.0
                            Variant: textualColumn
                            IsLocked: true
                            Properties:
                              FieldDisplayName: ="Label"
                              FieldName: ="Label"
                              FieldType: ="s"
                              Order: =1
                        - Value1:
                            Control: DropDownDataField@1.5.0
                            Variant: textualColumn
                            IsLocked: true
                            Properties:
                              FieldDisplayName: ="Value"
                              FieldName: ="Value"
                              FieldType: ="n"
                              Order: =2
                  - TiersFilter_8:
                      Control: Text@0.0.51
                      Properties:
                        Align: ='TextCanvas.Align'.End
                        Height: =36
                        PaddingLeft: =varGap
                        PaddingRight: =varGap
                        Text: ="Status Reason:"
                        VerticalAlign: =VerticalAlign.Middle
                        Weight: ='TextCanvas.Weight'.Regular
                        Width: =156
                        Y: =543
                  - ddClosedReason:
                      Control: DropDown@0.0.45
                      Properties:
                        DisplayMode: =If(IsBlank(ddSites_2.Selected),DisplayMode.Disabled,DisplayMode.Edit)
                        Items: =colClosedReasons
                        Width: =150
                        X: =156
                        Y: =547
                      Children:
                        - ID1:
                            Control: DropDownDataField@1.5.0
                            Variant: textualColumn
                            IsLocked: true
                            Properties:
                              FieldDisplayName: ="ID"
                              FieldName: ="ID"
                              FieldType: ="n"
                              Order: =2
                        - Reason1:
                            Control: DropDownDataField@1.5.0
                            Variant: textualColumn
                            IsLocked: true
                            Properties:
                              FieldDisplayName: ="Reason"
                              FieldName: ="Reason"
                              FieldType: ="s"
                              Order: =1
                  - TiersFilter_9:
                      Control: Text@0.0.51
                      Properties:
                        Align: ='TextCanvas.Align'.End
                        Height: =36
                        PaddingLeft: =varGap
                        PaddingRight: =varGap
                        Text: ="Close Date:"
                        VerticalAlign: =VerticalAlign.Middle
                        Weight: ='TextCanvas.Weight'.Regular
                        Width: =156
                        Y: =435
                  - TiersFilter_10:
                      Control: Text@0.0.51
                      Properties:
                        Align: ='TextCanvas.Align'.End
                        Height: =36
                        PaddingLeft: =varGap
                        PaddingRight: =varGap
                        Text: ="Expected Open Date:"
                        VerticalAlign: =VerticalAlign.Middle
                        Weight: ='TextCanvas.Weight'.Regular
                        Width: =156
                        Y: =471
                  - TiersFilter_11:
                      Control: Text@0.0.51
                      Properties:
                        Align: ='TextCanvas.Align'.End
                        Height: =36
                        PaddingLeft: =varGap
                        PaddingRight: =varGap
                        Text: ="Status Comment:"
                        VerticalAlign: =VerticalAlign.Middle
                        Weight: ='TextCanvas.Weight'.Regular
                        Width: =156
                        Y: =579
                  - dateClosedOn:
                      Control: DatePicker@0.0.46
                      Properties:
                        Width: =256
                        X: =156
                        Y: =437
                  - dateOpenOn:
                      Control: DatePicker@0.0.46
                      Properties:
                        Width: =256
                        X: =156
                        Y: =474
                  - txtClosedReasonDescription:
                      Control: TextInput@0.0.54
                      Properties:
                        Height: =67
                        Mode: ='TextInputCanvas.Mode'.Multiline
                        X: =71
                        Y: =615
                  - btnSearchLocations_10:
                      Control: Button@0.0.45
                      Properties:
                        Icon: ="Save"
                        OnSelect: "=ClearCollect(coltempUpdateLocations,\r\n    Filter(\r\n            DropColumns(colLocations,IsOpen),\r\n            (IsBlank(ddSites_2.Selected) || SiteID = ddSites_2.Selected.SiteID),\r\n            (IsBlank(ddWarehouses_2.Selected) || WarehouseID = ddWarehouses_2.Selected.WarehouseID),\r\n            (IsBlank(ddDoors_2.Selected) || DoorID = ddDoors_2.Selected.DoorID),\r\n// RackCode is not blank, and is between two values\r\n            (IsBlank(ddRacksLow_2.Selected) || IsBlank(ddRacksHigh_2.Selected) ||  \r\n                (RackCode >= Value(ddRacksLow_2.Selected.Value) && RackCode <= Value(ddRacksHigh_2.Selected.Value))),\r\n// TierCode is not blank and is between two values\r\n            (IsBlank(ddTiersLow_2.Selected) || IsBlank(ddTiersHigh_2.Selected) || \r\n                (TierCode >= Value(ddTiersLow_2.Selected.Value) && TierCode <= Value(ddTiersHigh_2.Selected.Value)))\r\n        )\r\n);\r\n\r\nClearCollect(colUpdateLocations,\r\n    AddColumns(\r\n        coltempUpdateLocations,\r\n        IsOpen,If(ddIsOpen.Selected.Value = 0,true,false),\r\n        ClosedDate, dateClosedOn.SelectedDate,\r\n        ExpectedOpenDate, dateOpenOn.SelectedDate,\r\n        ClosedReason, ddClosedReason.Selected.Reason,\r\n        ClosedReasonDescription,txtClosedReasonDescription.Value\r\n\r\n        \r\n));\r\n\r\nForAll(colUpdateLocations,\r\n    With(\r\n        {\r\n            X:ThisRecord\r\n        },\r\n        Patch(colSelectedLocations,LookUp(colSelectedLocations,LocationID = X.LocationID),\r\n        {\r\n            IsOpen:X.IsOpen,\r\n            ClosedDate:X.ClosedDate,\r\n            ExpectedOpenDate: X.ExpectedOpenDate,\r\n            ClosedReason: X.ClosedReason,\r\n            ClosedReasonDescription:X.ClosedReasonDescription\r\n\r\n        }\r\n        )\r\n    )\r\n)\r\n/*\r\n*/"
                        Text: ="Save"
                        X: =370
                        Y: =695
                  - RackFilter_3:
                      Control: Text@0.0.51
                      Properties:
                        Align: ='TextCanvas.Align'.End
                        Height: =36
                        PaddingLeft: =varGap
                        PaddingRight: =varGap
                        Text: ="Site:"
                        VerticalAlign: =VerticalAlign.Middle
                        Weight: ='TextCanvas.Weight'.Regular
                        Width: =156
                        Y: =90
                  - TiersFilter_12:
                      Control: Text@0.0.51
                      Properties:
                        Align: ='TextCanvas.Align'.End
                        Height: =36
                        PaddingLeft: =varGap
                        PaddingRight: =varGap
                        Text: ="Warehouse:"
                        VerticalAlign: =VerticalAlign.Middle
                        Weight: ='TextCanvas.Weight'.Regular
                        Width: =156
                        Y: =125
                  - TiersFilter_13:
                      Control: Text@0.0.51
                      Properties:
                        Align: ='TextCanvas.Align'.End
                        Height: =36
                        PaddingLeft: =varGap
                        PaddingRight: =varGap
                        Text: ="Door:"
                        VerticalAlign: =VerticalAlign.Middle
                        Weight: ='TextCanvas.Weight'.Regular
                        Width: =156
                        Y: =161
                  - TiersFilter_14:
                      Control: Text@0.0.51
                      Properties:
                        Align: ='TextCanvas.Align'.End
                        Height: =36
                        PaddingLeft: =varGap
                        PaddingRight: =varGap
                        Text: ="Total Locations:"
                        VerticalAlign: =VerticalAlign.Middle
                        Weight: ='TextCanvas.Weight'.Regular
                        Width: =156
                        Y: =385
                  - TiersFilter_15:
                      Control: Text@0.0.51
                      Properties:
                        Align: ='TextCanvas.Align'.Start
                        BorderRadius: =4
                        Fill: =RGBA(245, 245, 245, 1)
                        PaddingLeft: =varGap
                        PaddingRight: =varGap
                        Text: |-
                          =CountRows(Filter(
                                      colLocations,
                                      (IsBlank(ddSites_2.Selected) || SiteID = ddSites_2.Selected.SiteID),
                                      (IsBlank(ddWarehouses_2.Selected) || WarehouseID = ddWarehouses_2.Selected.WarehouseID),
                                      (IsBlank(ddDoors_2.Selected) || DoorID = ddDoors_2.Selected.DoorID),
                          // RackCode is not blank, and is between two values
                                      (IsBlank(ddRacksLow_2.Selected) || IsBlank(ddRacksHigh_2.Selected) ||  
                                          (RackCode >= Value(ddRacksLow_2.Selected.Value) && RackCode <= Value(ddRacksHigh_2.Selected.Value))),
                          // TierCode is not blank and is between two values
                                      (IsBlank(ddTiersLow_2.Selected) || IsBlank(ddTiersHigh_2.Selected) || 
                                          (TierCode >= Value(ddTiersLow_2.Selected.Value) && TierCode <= Value(ddTiersHigh_2.Selected.Value)))
                                  )
                          )
                        VerticalAlign: =VerticalAlign.Middle
                        Weight: ='TextCanvas.Weight'.Regular
                        Width: =156
                        X: =156
                        Y: =389
                  - CheckboxCanvas3:
                      Control: CheckBox@0.0.30
                      Properties:
                        Height: =42
                        Label: =
                        Width: =42
                        X: =424
                        Y: =119
                  - CheckboxCanvas3_1:
                      Control: CheckBox@0.0.30
                      Properties:
                        Height: =42
                        Label: =
                        Width: =42
                        X: =424
                        Y: =80
                  - CheckboxCanvas3_2:
                      Control: CheckBox@0.0.30
                      Properties:
                        Height: =42
                        Label: =
                        Width: =42
                        X: =424
                        Y: =151
                  - TextCanvas4:
                      Control: Text@0.0.51
                      Properties:
                        FontColor: =RGBA(189, 49, 51, 1)
                        Height: =31
                        Text: ="concat me with a distinct filter"
                        Width: =248
                        X: =236
                        Y: =322
                  - TextCanvas4_1:
                      Control: Text@0.0.51
                      Properties:
                        FontColor: =RGBA(189, 49, 51, 1)
                        Height: =31
                        Text: ="Add total days closed"
                        Width: =248
                        X: =252
                        Y: =452
                  - TextCanvas4_2:
                      Control: Text@0.0.51
                      Properties:
                        FontColor: =RGBA(189, 49, 51, 1)
                        Height: =93
                        Text: ="Hold physical closures when site wide tactical closures occur"
                        Width: =155
                        X: =269
                        Y: =97
      - conRackandTierFilter:
          Control: GroupContainer@1.4.0
          Variant: ManualLayout
          Properties:
            DropShadow: =DropShadow.Bold
            Fill: =RGBA(255, 255, 255, 1)
            Visible: =locvisRackTierFilter
            X: =235
            Y: =110
          Children:
            - RackandTierFilterTitle:
                Control: Text@0.0.51
                Properties:
                  Align: ='TextCanvas.Align'.Start
                  Height: =36
                  PaddingLeft: =varGap
                  PaddingRight: =varGap
                  Text: ="Rack and Tier Filter:"
                  VerticalAlign: =VerticalAlign.Middle
                  Weight: ='TextCanvas.Weight'.Semibold
                  Width: =Parent.Width
            - RackFilter:
                Control: Text@0.0.51
                Properties:
                  Align: ='TextCanvas.Align'.End
                  Height: =36
                  PaddingLeft: =varGap
                  PaddingRight: =varGap
                  Text: |-
                    ="Rack Filter:   From:"
                  VerticalAlign: =VerticalAlign.Middle
                  Weight: ='TextCanvas.Weight'.Regular
                  Width: =156
                  Y: =36
            - TiersFilter:
                Control: Text@0.0.51
                Properties:
                  Align: ='TextCanvas.Align'.End
                  Height: =36
                  PaddingLeft: =varGap
                  PaddingRight: =varGap
                  Text: |-
                    ="Tier Filter:     From:"
                  VerticalAlign: =VerticalAlign.Middle
                  Weight: ='TextCanvas.Weight'.Regular
                  Width: =156
                  Y: =72
            - ddRacksLow:
                Control: DropDown@0.0.45
                Properties:
                  DisplayMode: =If(IsBlank(ddDoors.Selected),DisplayMode.Disabled,DisplayMode.Edit)
                  Height: =24
                  Items: =Distinct(Filter(colLocations,DoorID=ddDoors.Selected.DoorID),RackCode)
                  Width: =136
                  X: =156
                  Y: =43
            - ddTiersLow:
                Control: DropDown@0.0.45
                Properties:
                  DisplayMode: =If(IsBlank(ddDoors.Selected),DisplayMode.Disabled,DisplayMode.Edit)
                  Height: =24
                  Items: =Distinct(Filter(colLocations,DoorID=ddDoors.Selected.DoorID),TierCode)
                  Width: =136
                  X: =156
                  Y: =79
            - TextCanvas1_15:
                Control: Text@0.0.51
                Properties:
                  Align: ='TextCanvas.Align'.End
                  Height: =36
                  PaddingLeft: =varGap
                  PaddingRight: =varGap
                  Text: ="To:"
                  VerticalAlign: =VerticalAlign.Middle
                  Weight: ='TextCanvas.Weight'.Regular
                  Width: =56
                  X: =292
                  Y: =36
            - TextCanvas1_16:
                Control: Text@0.0.51
                Properties:
                  Align: ='TextCanvas.Align'.End
                  Height: =36
                  PaddingLeft: =varGap
                  PaddingRight: =varGap
                  Text: ="To:"
                  VerticalAlign: =VerticalAlign.Middle
                  Weight: ='TextCanvas.Weight'.Regular
                  Width: =56
                  X: =292
                  Y: =72
            - ddRacksHigh:
                Control: DropDown@0.0.45
                Properties:
                  DisplayMode: =If(IsBlank(ddRacksLow.Selected),DisplayMode.Disabled,DisplayMode.Edit)
                  Height: =24
                  Items: =Distinct(Filter(colLocations,DoorID=ddDoors.Selected.DoorID,RackCode >= ddRacksLow.Selected.Value),RackCode)
                  Width: =136
                  X: =348
                  Y: =43
            - ddTiersHigh:
                Control: DropDown@0.0.45
                Properties:
                  DisplayMode: =If(IsBlank(ddTiersLow.Selected),DisplayMode.Disabled,DisplayMode.Edit)
                  Height: =24
                  Items: =Distinct(Filter(colLocations,DoorID=ddDoors.Selected.DoorID,TierCode >= ddTiersLow.Selected.Value),TierCode)
                  Width: =136
                  X: =348
                  Y: =79
            - btnCloseRackandTierFilter:
                Control: Button@0.0.45
                Properties:
                  Appearance: ='ButtonCanvas.Appearance'.Secondary
                  Height: =24
                  Icon: ="DismissCircle"
                  Layout: ='ButtonCanvas.Layout'.IconOnly
                  OnSelect: =UpdateContext({locvisRackTierFilter:false})
                  Text: =
                  Width: =36
                  X: =448
                  Y: =6
            - btnCloseRackandTierFilter_1:
                Control: Button@0.0.45
                Properties:
                  Appearance: ='ButtonCanvas.Appearance'.Secondary
                  Height: =24
                  Icon: ="ArrowReset"
                  Layout: ='ButtonCanvas.Layout'.IconOnly
                  OnSelect: |-
                    =Reset(ddRacksLow);
                    Reset(ddRacksHigh);
                    Reset(ddTiersLow);
                    Reset(ddTiersHigh);
                  Text: =
                  Width: =36
                  X: =400
                  Y: =6
            - btnSearchLocations_3:
                Control: Button@0.0.45
                Properties:
                  Height: |+
                    =24
                  Icon: ="Search"
                  OnSelect: |+
                    =UpdateContext({locvisRackTierFilter:false});
                    ClearCollect(colSelectedLocations,
                        Filter(colLocations,
                            (IsBlank(ddSites.Selected) || SiteID = ddSites.Selected.SiteID),
                            (IsBlank(ddWarehouses.Selected) || WarehouseID = ddWarehouses.Selected.WarehouseID),
                            (IsBlank(ddDoors.Selected) || DoorID = ddDoors.Selected.DoorID),
                            // Select all if rack blank, if not, select values between low and high rack
                            (And(IsBlank(ddRacksLow.Selected),IsBlank(ddRacksHigh.Selected)) || (RackCode >= Value(ddRacksLow.Selected.Value) && RackCode <= Value(ddRacksHigh.Selected.Value))),
                            // Select all if tier blank, if not, select values between low and high tier
                            (And(IsBlank(ddTiersLow.Selected),IsBlank(ddTiersHigh.Selected)) || (TierCode >= Value(ddTiersLow.Selected.Value) && TierCode <= Value(ddTiersHigh.Selected.Value)))
                        )
                    );
                  Text: ="Search"
                  X: =Parent.Width - Self.Width - varGap
                  Y: =Parent.Height - Self.Height - varGap
