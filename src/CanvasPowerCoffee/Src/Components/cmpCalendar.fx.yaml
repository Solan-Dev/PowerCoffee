cmpCalendar As CanvasComponent:
    Fill: =RGBA(0, 0, 0, 0)
    Height: =App.DesignHeight
    inDate: =Today()
    inEvents: |
        =Table(
            {EventDate:Date(2025,2,1),EventType:"AutomatedRelease",EventName:"Automated Release",EventDescription:"Event rgk jner go jj nerg;i jenrgk;jenrg oierfbokdnffb"},
            {EventDate:Date(2025,2,1),EventType:"DecisionEngine",EventName:"Decision Engine",EventDescription:"Event description"},
            {EventDate:Date(2025,2,1),EventType:"LeagueTable",EventName:"Event3",EventDescription:"Event description"},
            {EventDate:Date(2025,2,1),EventType:"FreeText",EventName:"Event4",EventDescription:"Event description"}
        )
    inMonth: =Text(cmpCalendar.inDate,"mmmm yyyy")
    inValues: |-
        =Table({StartofWeek:"Monday"})
    Width: =App.DesignWidth
    X: =0
    Y: =0
    ZIndex: =1

    conBase As groupContainer.verticalAutoLayoutContainer:
        DropShadow: =DropShadow.Light
        Height: =cmpCalendar.Height
        LayoutDirection: =LayoutDirection.Vertical
        LayoutGridColumns: =6
        LayoutGridRows: =6
        LayoutMode: =LayoutMode.Auto
        RadiusBottomLeft: =4
        RadiusBottomRight: =4
        RadiusTopLeft: =4
        RadiusTopRight: =4
        Width: =cmpCalendar.Width
        ZIndex: =3

        conHeader As groupContainer.horizontalAutoLayoutContainer:
            LayoutGridColumns: =6
            LayoutGridRows: =6
            LayoutMaxHeight: =0
            LayoutMaxWidth: =0
            LayoutMinHeight: =10
            LayoutMinWidth: =Parent.Width
            LayoutMode: =LayoutMode.Auto
            Width: =cmpCalendar.Width
            ZIndex: =1

            conHeaderLeft As groupContainer.manualLayoutContainer:
                Fill: =RGBA(255, 255, 255, 1)
                LayoutGridColumns: =6
                LayoutGridRows: =6
                LayoutMaxHeight: =0
                LayoutMaxWidth: =0
                LayoutMinHeight: =Parent.Height
                LayoutMinWidth: =5
                ZIndex: =1

                txtMonth As Text:
                    Align: ='TextCanvas.Align'.Center
                    AutoHeight: =false
                    BorderColor: =
                    DisplayMode: =DisplayMode.Edit
                    Fill: =
                    FontColor: =
                    Height: =64
                    PaddingBottom: =5
                    Size: =14
                    Text: |-
                        =$"{Text(varMonth,"mmmm")}
                        {Text(varMonth,"yyyy")}"
                    VerticalAlign: =VerticalAlign.Middle
                    Weight: ='TextCanvas.Weight'.Bold
                    Width: =149
                    X: =85
                    Y: =0
                    ZIndex: =2

                btnNextMonth As button:
                    BorderColor: =RGBA(0,0,0,0)
                    BorderThickness: =1
                    Color: =RGBA(0,0,0,1)
                    DisabledBorderColor: =RGBA(0,0,0,0)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    DisabledFill: =RGBA(244, 244, 244, 1)
                    Fill: =RGBA(0,0,0,0)
                    FocusedBorderColor: =RGBA(0,0,0,0)
                    FocusedBorderThickness: =0
                    FontWeight: =FontWeight.Bold
                    Height: =Parent.Height - (Self.Y * 2)
                    HoverBorderColor: =RGBA(0,0,0,1)
                    HoverColor: =RGBA(0,0,0,1)
                    HoverFill: =RGBA(240, 240, 240, 0.8)
                    OnSelect: |-
                        =Set(varMonth,
                            Date(
                            Year(varMonth),
                            Month(varMonth)+1,
                            1
                            )
                        )
                    PressedBorderColor: =RGBA(0,0,0,0)
                    PressedColor: =RGBA(0,0,0,0)
                    PressedFill: =RGBA(0,0,0,0)
                    RadiusBottomLeft: =0
                    RadiusBottomRight: =0
                    RadiusTopLeft: =0
                    RadiusTopRight: =0
                    Size: =20
                    Text: =">"
                    Width: =32
                    X: =234
                    Y: =8
                    ZIndex: =5

                btnPreviousMonth As button:
                    BorderColor: =RGBA(0,0,0,0)
                    BorderThickness: =1
                    Color: =RGBA(0,0,0,1)
                    DisabledBorderColor: =RGBA(0,0,0,0)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    DisabledFill: =RGBA(244, 244, 244, 1)
                    Fill: =RGBA(0,0,0,0)
                    FocusedBorderColor: =RGBA(0,0,0,0)
                    FocusedBorderThickness: =0
                    FontWeight: =FontWeight.Bold
                    Height: =Parent.Height - (Self.Y * 2)
                    HoverBorderColor: =RGBA(0,0,0,1)
                    HoverColor: =RGBA(0,0,0,1)
                    HoverFill: =RGBA(240, 240, 240, 0.8)
                    OnSelect: |-
                        =Set(varMonth,
                            Date(
                            Year(varMonth),
                            Month(varMonth)-1,
                            1
                            )
                        )
                    PressedBorderColor: =RGBA(0,0,0,0)
                    PressedColor: =RGBA(0,0,0,0)
                    PressedFill: =RGBA(0,0,0,0)
                    RadiusBottomLeft: =0
                    RadiusBottomRight: =0
                    RadiusTopLeft: =0
                    RadiusTopRight: =0
                    Size: =20
                    Text: ="<"
                    Width: =32
                    X: =53
                    Y: =8
                    ZIndex: =6

                btnToday As button:
                    BorderColor: =RGBA(0,0,0,1)
                    BorderThickness: =1
                    Color: =RGBA(0,0,0,1)
                    DisabledBorderColor: =RGBA(0,0,0,0)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    DisabledFill: =RGBA(244, 244, 244, 1)
                    Fill: =RGBA(0,0,0,0)
                    FocusedBorderColor: =RGBA(0,0,0,0)
                    FocusedBorderThickness: =0
                    FontWeight: =FontWeight.Bold
                    Height: =Parent.Height - (Self.Y * 2)
                    HoverBorderColor: =RGBA(0,0,0,1)
                    HoverColor: =RGBA(0,0,0,1)
                    HoverFill: =RGBA(240, 240, 240, 0.8)
                    OnSelect: |-
                        =Set(varMonth,
                            Date(
                            Year(Today()),
                            Month(Today()),
                            1
                            )
                        )
                    PressedBorderColor: =RGBA(0,0,0,0)
                    PressedColor: =RGBA(0,0,0,0)
                    PressedFill: =RGBA(0,0,0,0)
                    RadiusBottomLeft: =0
                    RadiusBottomRight: =0
                    RadiusTopLeft: =0
                    RadiusTopRight: =0
                    Size: =10
                    Text: ="Today"
                    Width: =64
                    X: =292
                    Y: =16
                    ZIndex: =7

            conHeaderRight As groupContainer.manualLayoutContainer:
                Fill: =RGBA(255, 255, 255, 1)
                LayoutGridColumns: =6
                LayoutGridRows: =6
                LayoutMaxHeight: =0
                LayoutMaxWidth: =0
                LayoutMinHeight: =Parent.Height
                LayoutMinWidth: =5
                ZIndex: =7

        conCalendar As groupContainer.verticalAutoLayoutContainer:
            FillPortions: =11
            LayoutDirection: =LayoutDirection.Vertical
            LayoutGridColumns: =6
            LayoutGridRows: =6
            LayoutMaxHeight: =0
            LayoutMaxWidth: =0
            LayoutMinHeight: =100
            LayoutMinWidth: =250
            LayoutMode: =LayoutMode.Auto
            Width: =cmpCalendar.Width
            ZIndex: =2

            galHeader As gallery.galleryHorizontal:
                BorderColor: =RGBA(0, 18, 107, 1)
                DelayItemLoading: =true
                Height: =45
                Items: |-
                    =ForAll(
                        Sequence(7),
                        cmpCalendar.inDate
                        +Value-Weekday(cmpCalendar.inDate, 
                            Switch(First(cmpCalendar.inValues).StartofWeek,
                                "Monday",
                                StartOfWeek.Monday,
                                "Tuesday",
                                StartOfWeek.Tuesday,
                                "Wednesday",
                                StartOfWeek.Wednesday,
                                "Thursday",
                                StartOfWeek.Thursday,
                                "Friday",
                                StartOfWeek.Friday,
                                "Saturday",
                                StartOfWeek.Saturday,
                                "Sunday",
                                StartOfWeek.Sunday
                                ))
                    )
                LayoutMaxHeight: =0
                LayoutMaxWidth: =0
                LayoutMinHeight: =10
                LayoutMinWidth: =320
                TemplatePadding: =galCalendarDays.TemplatePadding
                TemplateSize: =galCalendarDays.TemplateWidth
                Width: =galCalendarDays.Width
                X: =40
                Y: =103
                ZIndex: =1

                txtDay As Text:
                    Align: ='TextCanvas.Align'.Start
                    BorderColor: =
                    DisplayMode: =DisplayMode.Edit
                    Fill: =
                    FontColor: =
                    Height: =Parent.TemplateHeight
                    Text: =Text(ThisItem.Value,"dddd")
                    VerticalAlign: =VerticalAlign.Bottom
                    Width: =Parent.TemplateWidth
                    X: =0
                    Y: =0
                    ZIndex: =1

            galCalendarDays As gallery.galleryVertical:
                BorderColor: =RGBA(0, 18, 107, 1)
                DelayItemLoading: =true
                Fill: =RGBA(245,245,245,1)
                FillPortions: =22
                Items: |+
                    =ForAll(
                        Sequence(42),
                        varMonth
                        +Value-Weekday(varMonth, 
                            Switch(First(cmpCalendar.inValues).StartofWeek,
                                "Monday",
                                StartOfWeek.Monday,
                                "Tuesday",
                                StartOfWeek.Tuesday,
                                "Wednesday",
                                StartOfWeek.Wednesday,
                                "Thursday",
                                StartOfWeek.Thursday,
                                "Friday",
                                StartOfWeek.Friday,
                                "Saturday",
                                StartOfWeek.Saturday,
                                "Sunday",
                                StartOfWeek.Sunday
                                ))
                    )
                    
                Layout: =Layout.Vertical
                LayoutMaxHeight: =0
                LayoutMaxWidth: =0
                LayoutMinHeight: =60
                LayoutMinWidth: =320
                ShowScrollbar: =false
                TemplateFill: =If(ThisItem.Value=Today(),RGBA(227, 240, 250, 1),RGBA(255,255,255,1))
                TemplatePadding: =2
                TemplateSize: =(galCalendarDays.Height - (galCalendarDays.TemplatePadding*6))/6
                Width: =Parent.Width
                WrapCount: =7
                X: =40
                Y: =188
                ZIndex: =2

                galEvents As gallery.galleryVertical:
                    BorderColor: =RGBA(0, 18, 107, 1)
                    DelayItemLoading: =true
                    Height: =Parent.TemplateHeight - Self.Y
                    Items: =Filter(cmpCalendar.inEvents,EventDate=ThisItem.Value)
                    Layout: =Layout.Vertical
                    ShowScrollbar: =false
                    TemplatePadding: =1
                    TemplateSize: =Self.Height * 0.20
                    Width: =Parent.TemplateWidth
                    Y: =txtDayDate.Y + txtDayDate.Height
                    ZIndex: =1

                    Image2 As image:
                        BorderColor: =RGBA(0, 18, 107, 1)
                        DisabledBorderColor: =RGBA(166, 166, 166, 1)
                        DisabledFill: =RGBA(244, 244, 244, 1)
                        Height: =Parent.TemplateHeight
                        Image: |-
                            ="data:image/svg+xml;utf8," & EncodeUrl(
                                $"<svg width='{Self.Width}' height='{Self.Height}' viewBox='0 0 {Self.Width} {Self.Height}' xmlns='http://www.w3.org/2000/svg'>
                                    <defs>
                                        <linearGradient id='AutomatedRelease' x1='0%' y1='0%' x2='100%' y2='0%' gradientUnits='userSpaceOnUse'>
                                            <stop offset='0%' stop-color='#FF6F00'/>
                                            <stop offset='100%' stop-color='#FF6F00'/>
                                        </linearGradient>
                                        <linearGradient id='DecisionEngine' x1='0%' y1='0%' x2='100%' y2='0%' gradientUnits='userSpaceOnUse'>
                                            <stop offset='0%' stop-color='#0057FF'/>
                                            <stop offset='100%' stop-color='#A6DFFF'/>
                                        </linearGradient>
                                        <linearGradient id='LeagueTable' x1='0%' y1='0%' x2='100%' y2='0%' gradientUnits='userSpaceOnUse'>
                                            <stop offset='0%' stop-color='#ECEAE6'/>
                                            <stop offset='100%' stop-color='#ECEAE6'/>
                                        </linearGradient>
                                        <linearGradient id='FreeText' x1='0%' y1='0%' x2='100%' y2='0%' gradientUnits='userSpaceOnUse'>
                                            <stop offset='0%' stop-color='#FFFFFF'/>
                                            <stop offset='100%' stop-color='#FFFFFF'/>
                                        </linearGradient>
                                    </defs>
                                    <rect width='{Self.Width}' height='{Self.Height}' fill='url(#{Switch(ThisItem.EventType,"AutomatedRelease","AutomatedRelease","DecisionEngine","DecisionEngine","LeagueTable","LeagueTable","FreeText","FreeText")})' />
                                </svg>"
                            )
                        OnSelect: =Select(Parent)
                        RadiusBottomLeft: =7
                        RadiusBottomRight: =7
                        RadiusTopLeft: =7
                        RadiusTopRight: =7
                        Width: =Parent.TemplateWidth-Self.X*2
                        X: |
                            =0
                        Y: |
                            =0
                        ZIndex: =3

                    txtEvent As Text:
                        BorderColor: =
                        DisplayMode: =DisplayMode.Edit
                        Fill: =
                        FontColor: =
                        Height: =Parent.TemplateHeight
                        PaddingBottom: =0
                        PaddingLeft: =5
                        Size: =10
                        Text: |
                            =Left(ThisItem.EventName, RoundDown(Self.Width / 7, 0)) & If(Len(ThisItem.EventName) > RoundDown(Self.Width / 7, 0), "...", "") 
                        VerticalAlign: =VerticalAlign.Top
                        Width: =Parent.TemplateWidth*0.75
                        X: =0
                        Y: |
                            =0
                        ZIndex: =4

                    txtTime As Text:
                        Align: ='TextCanvas.Align'.End
                        BorderColor: =
                        DisplayMode: =DisplayMode.Edit
                        Fill: =
                        FontColor: =
                        Height: =Parent.TemplateHeight
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =4
                        Size: =10
                        Text: |-
                            =$"{Text(ThisItem.EventDate,"HH:mm")}"
                        VerticalAlign: =VerticalAlign.Top
                        Width: =If(Parent.TemplateWidth*0.25 >28,Parent.TemplateWidth*0.25,28)
                        X: =Parent.TemplateWidth-Self.Width
                        Y: |
                            =0
                        ZIndex: =5

                txtDayDate As Text:
                    BorderColor: =
                    DisplayMode: =DisplayMode.Edit
                    Fill: =
                    FontColor: |-
                        =If(ThisItem.Value >= Date(
                            Year(varMonth),
                            Month(varMonth)+1,
                            1
                            ) || ThisItem.Value <= Date(
                            Year(varMonth),
                            Month(varMonth),
                            0
                            )
                            || Weekday(ThisItem.Value) = 1
                            || Weekday(ThisItem.Value) = 7
                            ,RGBA(116,116,116,1),RGBA(00,0,0,1)
                        )
                    Height: =Parent.TemplateHeight *0.2
                    PaddingLeft: =3
                    Size: =12
                    Text: =$"{Text(ThisItem.Value,"dd")}"
                    Width: =Parent.TemplateWidth
                    Wrap: =false
                    X: =0
                    Y: =0
                    ZIndex: =2

                btnSelectDate As button:
                    BorderColor: =RGBA(0,0,0,0)
                    BorderThickness: =0
                    Color: =RGBA(0,0,0,0)
                    DisabledBorderColor: =RGBA(0,0,0,0)
                    DisabledColor: =RGBA(166, 166, 166, 1)
                    DisabledFill: =RGBA(244, 244, 244, 1)
                    DisplayMode: |-
                        =If(ThisItem.Value >= Date(
                            Year(varMonth),
                            Month(varMonth)+1,
                            1
                            ) || ThisItem.Value <= Date(
                            Year(varMonth),
                            Month(varMonth),
                            0
                            ),DisplayMode.Disabled,DisplayMode.Edit
                        )
                    Fill: =RGBA(0,0,0,0)
                    FocusedBorderColor: =RGBA(0,0,0,0)
                    FocusedBorderThickness: =0
                    FontWeight: =FontWeight.Semibold
                    Height: =Parent.TemplateHeight
                    HoverBorderColor: =RGBA(0,0,0,0)
                    HoverColor: =RGBA(0,0,0,0)
                    HoverFill: =RGBA(240, 232, 245, 0.4)
                    OnSelect: =Select(Parent)
                    PressedBorderColor: =RGBA(0,0,0,0)
                    PressedColor: =RGBA(0,0,0,0)
                    PressedFill: =RGBA(0,0,0,0)
                    RadiusBottomLeft: =0
                    RadiusBottomRight: =0
                    RadiusTopLeft: =0
                    RadiusTopRight: =0
                    Size: =15
                    Text: =""
                    Visible: |-
                        =// If this day lands on a work day in the selected month, be visible, if not visible=false 
                        
                        If(ThisItem.Value >= Date(
                            Year(varMonth),
                            Month(varMonth)+1,
                            1
                            ) || ThisItem.Value <= Date(
                            Year(varMonth),
                            Month(varMonth),
                            0
                            )
                            || Weekday(ThisItem.Value) = 1
                            || Weekday(ThisItem.Value) = 7
                            ,false,true
                        )
                    Width: =Parent.TemplateWidth
                    ZIndex: =3

